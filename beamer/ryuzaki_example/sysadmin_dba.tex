\documentclass{beamer}

\usepackage{beamerthemeCopenhagen}
%\usepackage{beamerthemeBerkeley}
%\usepackage{beamercolorthemeseahorse}
%\usepackage{color}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage[brazil]{babel}
\usepackage[latin1]{inputenc}
\usepackage{listings,color,textcomp}
%\definecolor{listinggray}{gray}{0.3}
\definecolor{lbcolor}{rgb}{0.9,0.9,0.9}
\lstset{
	backgroundcolor=\color{white},
	tabsize=4,
	rulecolor=,
	language=Perl,
    basicstyle=\scriptsize,
    upquote=true,
    aboveskip={1.5\baselineskip},
    columns=fixed,
    showstringspaces=false,
    extendedchars=true,
    breaklines=true,
    prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
    frame=shadowbox,
    showtabs=false,
    showspaces=false,
    numbers=left,
    showstringspaces=false,
    identifierstyle=\ttfamily,
    keywordstyle=\color[rgb]{0,0,1},
    commentstyle=\color[rgb]{0.133,0.545,0.133},
    stringstyle=\color[rgb]{0.627,0.126,0.941},
}
\logo{\includegraphics[scale=0.3]{yapc.png}}
%\logo{YAPC::Brasil::2009}

\title{Perl para \textit{Sysadmins} e \textit{DBA's}}
\author{Lindolfo ''Lorn'' Rodrigues}
\date{}

\begin{document}

\beamertemplatetransparentcoveredmedium

\frame{\titlepage}

%\begin{frame}[shrink]
%\tableofcontents
%\end{frame}

\section{Introdução}

\frame 
{
  \frametitle{\$ whoami}
  %\lstinputlisting{foo.pl}
  \$ id 

  \$ uid=1000(lorn) gid=100(users)

  grupos=11(\#sao-paulo.pm), 17(\#slackware-br), 18(\#catalyst), 19(\#moose),83(\#perl6)

}


\frame 
{
  \frametitle{Agenda}

  \begin{itemize}[<+->]
  \item \textit{Sysadmin}  
  \begin{itemize}[<+->]
    \item Parsers de log
    \item Automatizações
    \item Comparações awk, sed, shell script
  \end{itemize}
  \end{itemize}
  \begin{itemize}[<+->]
  \item \textit{DBA}
  \begin{itemize}[<+->]
    \item ETL
    \item Data Cleaning
    \item ...
  \end{itemize}
  \end{itemize}

}

\frame 
{
  \frametitle{Pré-requisitos}
  \lstinputlisting{hash.pl}

}

\section{Sysadmin}

\frame
{
  \frametitle{Parsers}
  \begin{itemize}[<+->]
  \item SVN com problemas
  \begin{itemize}[<+->]
  \item svn update, não funcionava
  \item Site e Backoffice, totalmente desincronizado com o repositório
  \item Não era feito Branch, não era feito tag... 
  \end{itemize}
  \item Git!
  \begin{itemize}[<+->]
  \item Distribuído
  \item Branchs mais faceis
  \item Uso de tags para o site
  \item gitweb - http://192.168.0.178/gitweb/
  \item Site sincronizado
  \item \textcolor{red}{Backoffice ainda não}
  \end{itemize}
  \end{itemize}
}

\frame
{
  \frametitle{Sysadmin}
  \begin{itemize}[<+->]
  \item \textcolor{red}{Samba para controlar os usuários}
  \item \textcolor{red}{Domínio - centralização de usuários}
  \item \textcolor{red}{Um servidor de arquivos, backup somente desse
  servidor}
  \end{itemize}
}

\frame
{
  \frametitle{Suporte remoto}
  \begin{itemize}[<+->]
  \item \textcolor{red}{Bip ( já cotado, e com custo benefício bom )}
  \item \textcolor{red}{Modem 3g para acesso}
  \item \textcolor{red}{Escala de suporte}
  \end{itemize}
}

\section{Infra DC}

\frame
{
  \frametitle{Estrutura original}

  \begin{figure}[h]
    \centering
    %\includegraphics [scale=0.22]{antiga.jpg}
  \end{figure}
}

\frame
{
  \frametitle{Estrutura nova}

  \begin{figure}[h]
    \centering
    %\includegraphics [scale=0.22]{nova.jpg}
  \end{figure}
}

\frame
{
  \frametitle{Vantagens da nova arquitetura}
  \begin{itemize}[<+->]
  \item Contingência
  \item Melhor utilização das máquinas
  \item Virtualização
  \end{itemize}
}


\frame
{
  \frametitle{Tirando o controle da ALOG}
  \begin{itemize}[<+->]
  \item Cada dominio novo, era necessario um chamado na ALOG
  \item Recorde de 7 dias para se criar um CNAME! (
  http://retaguarda.jacotei.com.br )
  \item Havia alterações em nosso ambiente sem prévia autorização
  \item Load Balancer compartilhado
  \item Load Balancer controlado pela ALOG
  \end{itemize}
}


\frame
{
  \frametitle{JáCotei no controle!}
  \begin{itemize}[<+->]
  \item Firewall
    \begin{itemize}[<+->]
      \item Maior flexibilidade na administração das máquinas
      \item Maior facilidade para bloquear spiders
      \item \textcolor{red}{Reformulação das regras}
      \item Remoção das VLANS
      \item \textcolor{red}{Reformular os ips}
      \item \textcolor{red}{Redundância automática do firewall}
      \item LoadBalance 
      \item \textcolor{red}{Redundância automática LoadBalance}
     % adicionar imagens explicando o problemas de ter muitas vlans
    \end{itemize}
  \item DNS
    \begin{itemize}[<+->]
      \item Criação de nomes mais rápido/fácil
      \item \textcolor{red}{Criação de DNS interno}
    \end{itemize}
  \item \textcolor{red}{Backup}
    \begin{itemize}[<+->]
      \item \textcolor{red}{Só existe o backup da alog ( 48h para restaurar )}
      \item \textcolor{red}{Precisamos de um backup próprio}
    \end{itemize}
  \end{itemize}
}

\frame
{
  \frametitle{Otimização}
  \begin{itemize}[<+->]
  \item \textcolor{red}{Recompilar Apache em todas as máquinas}
  \item \textcolor{red}{Usar Nginx para coisas estáticas ( js/css/imagens )}
  \item \textcolor{red}{Um Banco XE para cada máquina web}
  \item \textcolor{red}{Usar Squid como Loadbalancer}
    \begin{itemize}[<+->]
      \item Cache estático
      \item Cache dinamico
     % adicionar imagens explicando o problemas de ter muitas vlans
    \end{itemize}
  \end{itemize}
}


\section{Desenvolvimento}
\frame
{
  \frametitle{Testes}
  \begin{itemize}[<+->]
  \item \textcolor{red}{Cobertura de Testes}
  \item \textcolor{red}{Testes Unitários}
  \item \textcolor{red}{Testes Funcionais}
  \item \textcolor{red}{Testes de Carga}
  \begin{itemize}[<+->]
  \item Quantos usuários simultâneos o site aguenta?
  \item Quantos usuários simultâneos 1 máquina web aguenta?
  \item ...
  \end{itemize}
  \end{itemize}
}


\section{Desenvolvimento Spider}

\frame
{
  \frametitle{Spider}
  \begin{itemize}[<+->]
  \item XML rápido com Java
  \item HTML continua com Perl
  \item \textcolor{red}{Banco intermediário} (Atualizar somente quando
  necessário )
  \end{itemize}
}

\section{Desenvolvimento Backoffice}

\frame
{
  \frametitle{Backoffice}
  \begin{itemize}[<+->]
  \item Relatórios ( Reports )
  \item Legados - Cold Fusion, Delphi
  \item Novos Aplicativos em Java 
  \begin{itemize}[<+->]
  \item Alarme de Preço
  \item Prancheta, Aniversário
  \item Logserver ( faz o log de tudo que é feito no site em Cake )
  \item Download de imagens
  \end{itemize}
  \item Snapshot
  \item Relatórios ( Serviço )
  \end{itemize}
}


\section{Bibliografia e coisas interessantes}

\frame
{
    \href{http://www.ibm.com/developerworks/linux/library/l-punix.html}{Cultured
    Perl: Automating UNIX system administration with Perl}

    \href{http://www.ibm.com/developerworks/linux/library/l-p101/}{Cultured
    Perl: One-liners 101}
}


\end{document}
